# =============================================================================
# KOMPITE - Configuración de Redis
# Optimizado para bloqueos distribuidos y matchmaking
# =============================================================================

# Persistencia - Crítico para recuperación de estado
appendonly yes
appendfsync everysec
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# Snapshots RDB como backup adicional
save 900 1
save 300 10
save 60 10000

# Memoria
maxmemory 512mb
maxmemory-policy allkeys-lru

# Conexiones
tcp-keepalive 300
timeout 0
tcp-backlog 511

# Logging
loglevel notice

# Seguridad básica (cambiar en producción)
# requirepass your-redis-password-here

# Límites de clientes
maxclients 10000

# Configuración para bloqueos distribuidos (Redlock)
# Los locks deben tener TTL para evitar deadlocks
# TTL recomendado: 30 segundos para operaciones de matchmaking
